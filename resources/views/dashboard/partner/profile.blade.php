@extends('dashboard.index')

@section('content')
<main class="moby__content-body bckd8 content-view-partner">

    <div class="div ctn-profile">

        <div class="div">
        <div class="in-head-table ">
                <div class="div clr-float">

                    <div class="brcumb wh-m-520">
                        <div class="tbl">
                            <div class="intbl">
                                <div class="div">

                                    <!-- <span class="sli_icon-folder"></span>
                                    <a href="/">
                                        <span>Dashboard</span>
                                    </a>
                                    <span class="bts">
                                        <span class="ic fas fa-circle"></span>
                                    </span>
                                    <span class="sli_icon-folder"></span>
                                    <a href="/dashboard/partner">
                                        <span>Partner</span>
                                    </a>
                                    <span class="bts">
                                        <span class="ic fas fa-circle"></span>
                                    </span>
                                    <span class="label">
                                        <span class="label-partner_name"></span>
                                    </span> -->

                                    <div class="w90">
                                        <div class="splash h15 splash-tbl"></div>
                                    </div>
                                    <div class="w90">
                                        <div class="splash h15 splash-tbl"></div>
                                    </div>
                                    <div class="w90">
                                        <div class="splash h15 splash-tbl"></div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div> 
                </div>
            </div>
        </div>

        <div class="div content-top">
            
            <div class="card body-pd-0 boxssml">

                <!-- <div class="card-body">

                    <div class="nav-btn-r">
                        <div class="dropdown">
                            <a class="simple-dropdown" data-toggle="dropdown"><i class="icon-more_vert_outlined icon"></i></a>
                            <div class="dropdown-menu dropdown-menu-right dropdown-menu-lg-left">
                                <a class="dropdown-item pdtb5 cmd-modal" href="#" data-toggle="modal" data-target="#modalname">
                                    <div class="div">
                                        <span>Sunting</span>
                                        <span class="ic-r sli_icon-pencil"></span>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>

                    <div class="div box pdt35">
                        <div class="div">
                            <div class="div ttl">
                                <span>
                                    <span class="aic vf">
                                        <span class="ic sli_icon-check sc"></span>
                                        <span class="ic sli_icon-clock vf"></span>
                                    </span>
                                </span>
                                <b class="fsize16">CV Herbindopersada</b>
                            </div>
                            <div class="div label">
                                <span class="ic sli_icon-badge"></span>
                                <span class="fsize14">Distributor</span>
                                <span class="dot brc w6"></span>
                                <span class="fsize12">INV/123/UDN</span>
                            </div>
                        </div>
                        <div class="div">
                            <div class="div clr-float">
                                <div class="fl-right label fsize12">
                                    <span class="fsize11 up-txt">Yono</span>
                                    <span class="dot brc w6"></span>
                                    <span>12 Nov 2021</span>
                                </div>
                            </div>
                        </div>
                    </div>

                </div> -->

                <div class="card-body">
                    <div class="div box pdt35">
                        <div class="div">
                            <div class="div ttlx">
                                <div class="splash h20 splash-tbl w360"></div>
                            </div>
                            <div class="div label">
                                <span class="fsize14">
                                    <div class="w90">
                                        <div class="splash h15 splash-tbl"></div>
                                    </div>
                                </span>
                                <span class="fsize12">
                                    <div class="w90">
                                        <div class="splash h15 splash-tbl"></div>
                                    </div>
                                </span>
                            </div>
                        </div>
                        <div class="div">
                            <div class="div clr-float">
                                <div class="fl-right">
                                    <div class="div">
                                        <div class="w90">
                                            <div class="splash h15 splash-tbl"></div>
                                        </div>

                                        <div class="w90">
                                            <div class="splash h15 splash-tbl"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


            </div>

        </div>

        <div class="div content-bottom">
            <div class="div clr-float">
                
                <div class="ctn-body fl-right">

                    <!-- <div class="div">
                        <div class="card body-pd-0 boxssml">
                            <div class="card-body">
                                <div class="div box">
                                    <div class="tabs">
                                        <div class="nav nav-pills nav-danger" id="danger-v-pills-tab" role="tablist" aria-orientation="vertical">
                                            <a class="nav-link active" id="danger-v-pills-home-tab" data-toggle="pill" href="#danger-v-pills-home" role="tab" aria-controls="danger-v-pills-home" aria-selected="true">Admin</a>
                                            <a class="nav-link" id="danger-v-pills-profile-tab" data-toggle="pill" href="#danger-v-pills-profile" role="tab" aria-controls="danger-v-pills-profile" aria-selected="false">Alamat</a>
                                        </div>
                                    </div>
                                    <div class="tab-content mr-b-20" id="danger-v-pills-tabContent">

                                        <div class="tab-pane fade show active" id="danger-v-pills-home" role="tabpanel" aria-labelledby="danger-v-pills-home-tab">
                                            <div class="div">
                                                <div class="nav-btn-r t0 r0">
                                                    <div class="dropdown">
                                                        <a class="simple-dropdown" data-toggle="dropdown"><i class="icon-more_vert_outlined icon"></i></a>
                                                        <div class="dropdown-menu dropdown-menu-right dropdown-menu-lg-left">
                                                        <a class="dropdown-item pdtb5 cmd-modal" href="#" data-toggle="modal" data-target="#modaladmin-partner">
                                                                <div class="div">
                                                                    <span>Sunting</span>
                                                                    <span class="ic-r sli_icon-pencil"></span>
                                                                </div>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="div box pd0">
                                                    <div class="div">
                                                        <div class="div ttl">
                                                            <span class="sli_icon-user"></span>
                                                            <b>Yono Cahyono</b>
                                                        </div>
                                                        <div class="div">
                                                            <div class="div">
                                                                <span class="dot w6 brc rt"></span>
                                                                <span>0867676</span>
                                                            </div>
                                                            <div class="div">
                                                                <span class="dot w6 brc rt"></span>
                                                                <span>yono@gmail.com</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="tab-pane fade" id="danger-v-pills-profile" role="tabpanel" aria-labelledby="danger-v-pills-profile-tab">
                                            <div class="div">
                                                <div class="nav-btn-r t0 r0">
                                                    <div class="dropdown">
                                                        <a class="simple-dropdown" data-toggle="dropdown"><i class="icon-more_vert_outlined icon"></i></a>
                                                        <div class="dropdown-menu dropdown-menu-right dropdown-menu-lg-left">
                                                            <a class="dropdown-item pdtb5" href="#">
                                                                <div class="div">
                                                                    <span>Sunting</span>
                                                                    <span class="ic-r sli_icon-pencil"></span>
                                                                </div>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="div box pd0">
                                                    <div class="div">
                                                        <div class="div">
                                                            <div class="div">
                                                                <span>Jalan Cilangkap Raya</span>
                                                            </div>
                                                        </div>
                                                        <div class="div">
                                                            <span>Kecamatan Cipayung</span>
                                                            <span class="dot w6 brc"></span>
                                                            <span>Kota Jakarta Timur</span>
                                                        </div>
                                                        <div class="div">
                                                            <span>DKI JAKARTA</span>
                                                            <span class="dot w6 brc"></span>
                                                            <span>12345</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>

                        </div>
                    </div> -->

                    <div class="div">
                        <div class="card body-pd-0 boxssml">
                            <div class="card-body">
                                <div class="div box">
                                    <div class="tabs"> 
                                        <div class="w50">
                                            <div class="splash h15 splash-tbl"></div>
                                        </div>

                                        <div class="w50">
                                            <div class="splash h15 splash-tbl"></div>
                                        </div>
                                        <div class="w50">
                                            <div class="splash h15 splash-tbl"></div>
                                        </div>
                                    </div>
                                    <div class="tab-content" id="danger-v-pills-tabContent">
                                        <div class="tab-pane fade show active" id="danger-v-pills-home" role="tabpanel" aria-labelledby="danger-v-pills-home-tab">
                                            <div class="div h15"></div>
                                            <div class="div">
                                                <div class="div box pd0">
                                                    <div class="div">
                                                        <div class="div ttl">
                                                            <div class="splash h18 splash-tbl w360"></div>
                                                        </div>
                                                        <div class="div ttl">
                                                            <div class="w90">
                                                                <div class="splash h15 splash-tbl"></div>
                                                            </div>

                                                            <div class="w90">
                                                                <div class="splash h15 splash-tbl"></div>
                                                            </div>
                                                        </div>
                                                        <div class="div h15"></div>
                                                        <div class="div ttl">
                                                            <div class="splash h18 splash-tbl w360"></div>
                                                        </div>

                                                        <div class="div ttl">
                                                            <div class="splash h15 splash-tbl w180"></div>
                                                        </div>

                                                        <div class="div ttl">
                                                            <div class="splash h15 splash-tbl w90"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                </div>

                <div class="ctn-body fl-left">

                    <!-- <div class="div">
                        <div class="card body-pd-0 boxssml">
                            <div class="card-body">
                                <div class="nav-btn-r">
                                    <div class="dropdown">
                                        <a class="simple-dropdown" data-toggle="dropdown"><i class="icon-more_vert_outlined icon"></i></a>
                                        <div class="dropdown-menu dropdown-menu-right dropdown-menu-lg-left">
                                            <a class="dropdown-item pdtb5 cmd-modal" href="#" data-toggle="modal" data-target="#modalowner">
                                                <div class="div">
                                                    <span>Sunting</span>
                                                    <span class="ic-r sli_icon-pencil"></span>
                                                </div>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                <div class="div box">
                                    <div class="div">
                                        <div class="div label txud ttl">
                                            <span>Owner</span>
                                        </div>
                                        <div class="div">
                                            <div class="div">
                                                <span class="dot w6 brc rt"></span>
                                                <b>Yono Cahyono</b>
                                            </div>
                                            <div class="div">
                                                <span class="dot w6 brc rt"></span>
                                                <span>0867676</span>
                                            </div>
                                            <div class="div">
                                                <span class="dot w6 brc rt"></span>
                                                <span>yono@gmail.com</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>

                        </div>
                    </div> -->

                    <!-- <div class="div">
                        <div class="card body-pd-0 boxssml">
                            <div class="card-body">
                                <div class="nav-btn-r">
                                    <div class="dropdown">
                                        <a class="simple-dropdown" data-toggle="dropdown"><i class="icon-more_vert_outlined icon"></i></a>
                                        <div class="dropdown-menu dropdown-menu-right dropdown-menu-lg-left">
                                            <a class="dropdown-item pdtb5 cmd-modal" href="#" data-toggle="modal" data-target="#modalcontact">
                                                <div class="div">
                                                    <span>Sunting</span>
                                                    <span class="ic-r sli_icon-pencil"></span>
                                                </div>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                <div class="div box">
                                    <div class="div">
                                        <div class="label txud ttl">
                                            <span>Kontak</span>
                                        </div>
                                        <div class="div">
                                            <div class="div">
                                                <span class="dot w6 brc rt"></span>
                                                <span>0867676</span>
                                            </div>
                                            <div class="div">
                                                <span class="dot w6 brc rt"></span>
                                                <span>email@gmail.com</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>

                        </div>
                    </div> -->

                    <!-- <div class="div">
                        <div class="card body-pd-0 boxssml">
                            <div class="card-body">
                                <div class="nav-btn-r">
                                    <div class="dropdown">
                                        <a class="simple-dropdown" data-toggle="dropdown"><i class="icon-more_vert_outlined icon"></i></a>
                                        <div class="dropdown-menu dropdown-menu-right dropdown-menu-lg-left">
                                            <a class="dropdown-item pdtb5 cmd-modal" href="#" data-toggle="modal" data-target="#modaladdress-partner">
                                                <div class="div">
                                                    <span>Sunting</span>
                                                    <span class="ic-r sli_icon-pencil"></span>
                                                </div>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                <div class="div box">
                                    <div class="div">
                                        <div class="label txud ttl">
                                            <span>Alamat</span>
                                        </div>
                                        <div class="div">
                                            <div class="div">
                                                <div class="div">
                                                    <span>Jalan Cilangkap Raya</span>
                                                </div>
                                            </div>
                                            <div class="div">
                                                <span>Kecamatan Cipayung</span>
                                                <span class="dot w6 brc"></span>
                                                <span>Kota Jakarta Timur</span>
                                            </div>
                                            <div class="div">
                                                <span>DKI JAKARTA</span>
                                                <span class="dot w6 brc"></span>
                                                <span>12345</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>

                        </div>
                    </div> -->

                    <div class="div">
                        <div class="card body-pd-0 boxssml">
                            <div class="card-body">
                                <div class="div box">
                                    <div class="div">
                                        <div class="div label txud ttl">
                                            <div class="splash h15 splash-tbl w50"></div>
                                        </div>
                                        <div class="div">
                                            <div class="div ttl">
                                                <div class="splash h18 splash-tbl w210"></div>
                                            </div>
                                            <div class="div">
                                                <div class="splash h15 splash-tbl w140"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>

                        </div>
                    </div>

                    <div class="div">
                        <div class="card body-pd-0 boxssml">
                            <div class="card-body">
                                <div class="div box">
                                    <div class="div">
                                        <div class="div label txud ttl">
                                            <div class="splash h15 splash-tbl w50"></div>
                                        </div>
                                        <div class="div">
                                            <div class="div ttl">
                                                <div class="splash h18 splash-tbl w210"></div>
                                            </div>
                                            <div class="div">
                                                <div class="splash h15 splash-tbl w140"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>

                        </div>
                    </div>

                    <div class="div">
                        <div class="card body-pd-0 boxssml">
                            <div class="card-body">
                                <div class="div box">
                                    <div class="div">
                                        <div class="div label txud ttl">
                                            <div class="splash h15 splash-tbl w50"></div>
                                        </div>
                                        <div class="div">
                                            <div class="div ttl">
                                                <div class="splash h18 splash-tbl w210"></div>
                                            </div>
                                            <div class="div">
                                                <div class="splash h15 splash-tbl w140"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>

                        </div>
                    </div>

                </div>

            </div>
        </div>

    </div>

    <!-- <div class="notfound">
        <div class="div">
            <div class="div">
                <img src="{{$URI}}/assets/svg/empty.svg" alt="">
            </div>
            <div class="div">
                <h1>Waduh, yang kamu tuju tidak ditemukan!</h1>
            </div>
            <div class="div">
                <span class="label">Mungkin kamu salah alamat tujuan. Ayok kembali ke jalan yang benar.</span>
            </div>
            <div class="div">
                <a href="{{$URI}}" class="btnb bc-orange w210">
                    <span>Kembali</span>
                </a>
            </div>
        </div>
    </div> -->


    <!-- modal -->

    <!-- MODAL LABEL -->
    <div class="modal fade new-modal" id="modalname" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog w460" role="document">
            <div class="modal-content br-rds12 pd-tb15">
                <div class="modal-header txt-center no-br">
                    <div class="div">
                        <h2 class="modal-title">
                            <span class="fsize18">Informasi Umum</span>
                        </h2>
                        <div class="div">
                            <span class="label">Informasi Nama Partner dan Nomor Surat Perjanjian</span>
                        </div>
                    </div>
                    <button type="button" class="close pd-tbnull" style="position:absolute; right:20px;" data-dismiss="modal" aria-label="Close">
                        <span class="flaticon2-cross fsize12"></span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="div">
                        <form action="/api/partner/sunting/label">

                            <div class="div pd-lr30">
                                <div class="div">
                                    <span class="label">Nama atau label Partner</span>
                                    <div class="div ar-content">
                                        <input type="text" name="name" class="form-control br-rds8 " placeholder="">
                                    </div>
                                </div>
                                <div class="div h18"></div>
                                <div class="div">
                                    <span class="label">Nomor Surat Perjanjian</span>
                                    <div class="div ar-content">
                                        <input type="text" name="nosurat" class="form-control br-rds8 " placeholder="">
                                    </div>
                                </div>
                                <div class="div h18"></div>
                                <div class="div">
                                    <div class="div pd10 bc-yw">
                                        <input type="text" name="expire_days" class="form-control br-rds8  w50 text-center" placeholder="0">
                                        <span class="ic sli_icon-info"></span>
                                        <span class="label">Batas akhir pembayaran (dalam hari)</span>
                                    </div>
                                </div>
                            </div>
                            <input type="hidden" name="partner_id" class="partner_id" value="">
                            <input type="submit" value="Submit" class="hide">
                        </form>

                    </div>

                    <div class="div h15"></div>
                </div>
                <div class="modal-footer no-br br-rdsb12">
                    
                    <button type="button" class="btn green modal-submit fix w110 is-loading br-rds8" role="off">
                        <span>SIMPAN</span>
                    </button>
                </div>
            </div>
        </div>
    </div>


    <!-- MODAL KONTAK -->
    <div class="modal fade new-modal" id="modalcontact" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog w460" role="document">
            <div class="modal-content br-rds12 pd-tb15">
                <div class="modal-header txt-center no-br">
                    <div class="div">
                        <h2 class="modal-title">
                            <span class="fsize18">Kontak</span>
                        </h2>
                        <div class="div">
                            <span class="label">Sertakan informasi kontak Partner</span>
                        </div>
                    </div>
                    <button type="button" class="close pd-tbnull" style="position:absolute; right:20px;" data-dismiss="modal" aria-label="Close">
                        <span class="flaticon2-cross fsize12"></span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="div">
                        <form action="/api/partner/sunting/contact">

                            <div class="div pd-lr30">
                                <div class="div">
                                    <span class="label">Telepon</span>
                                    <div class="div ar-content">
                                        <input type="text" name="contact_phone" class="form-control br-rds8  w50p number" placeholder="">
                                    </div>
                                </div>
                                <div class="div h18"></div>
                                <div class="div">
                                    <span class="label">Alamat Email</span>
                                    <div class="div ar-content">
                                        <input type="text" name="contact_email" class="form-control br-rds8 " placeholder="">
                                    </div>
                                </div>

                            </div>
                            <input type="hidden" name="partner_id" class="partner_id" value="">
                            <input type="submit" value="Submit" class="hide">
                        </form>

                    </div>

                    <div class="div h15"></div>
                </div>
                <div class="modal-footer no-br br-rdsb12">
                    
                    <button type="button" class="btn green modal-submit fix w110 is-loading br-rds8" role="off">
                        <span>SIMPAN</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL OWNER -->
    <div class="modal fade new-modal" id="modalowner" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog w460" role="document">
            <div class="modal-content br-rds12 pd-tb15">
                <div class="modal-header txt-center no-br">
                    <div class="div">
                        <h2 class="modal-title">
                            <span class="fsize18">Onwer</span>
                        </h2>
                        <div class="div">
                            <span class="label">Harap lengkapi informasi onwer</span>
                        </div>
                    </div>
                    <button type="button" class="close pd-tbnull" style="position:absolute; right:20px;" data-dismiss="modal" aria-label="Close">
                        <span class="flaticon2-cross fsize12"></span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="div">
                        <form action="/api/partner/sunting/owner">

                            <div class="div pd-lr30">
                                <div class="div">
                                    <span class="label">Nama Owner</span>
                                    <div class="div ar-content">
                                        <input type="text" name="owner_name" class="form-control br-rds8  owner-name-val" placeholder="">
                                    </div>
                                </div>
                                <div class="div h18"></div>
                                <div class="div">
                                    <span class="label">Telepon</span>
                                    <div class="div ar-content">
                                        <input type="text" name="owner_phone" class="form-control br-rds8  owner-phone-val w50px number" placeholder="Telepon">
                                    </div>
                                </div>
                                <div class="div h18"></div>
                                <div class="div">
                                    <span class="label">Email</span>
                                    <div class="div ar-content">
                                        <input type="text" name="owner_email" class="form-control br-rds8  owner-email-val" placeholder="">
                                    </div>
                                </div>

                            </div>
                            <input type="hidden" name="partner_id" class="partner_id" value="">
                            <input type="submit" value="Submit" class="hide">
                        </form>

                    </div>

                    <div class="div h15"></div>
                </div>
                <div class="modal-footer no-br br-rdsb12">
                    
                    <button type="button" class="btn green modal-submit fix w110 is-loading br-rds8" role="off">
                        <span>SIMPAN</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL ADDRESS -->
    <div class="modal fade new-modal" id="modaladdress-partner" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog w460" role="document">
            <div class="modal-content br-rds12 pd-tb15">
                <div class="modal-header txt-center no-br">
                    <div class="div">
                        <h2 class="modal-title">
                            <span class="fsize18">Alamat Partner</span>
                        </h2>
                        <div class="div">
                            <span class="label">Lengkapi alamat partner</span>
                        </div>
                    </div>
                    <button type="button" class="close pd-tbnull" style="position:absolute; right:20px;" data-dismiss="modal" aria-label="Close">
                        <span class="flaticon2-cross fsize12"></span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="div">
                        <form action="/api/partner/sunting/address">

                            <div class="div pd-lr30">

                                <div class="div">
                                    <span class="label">Alamat Lengkap</span>
                                    <div class="div ar-content">
                                        <textarea name="address" class="form-control br-rds8  noreseize h70 pd-tb0" placeholder=""></textarea>
                                    </div>
                                </div>

                                <div class="div h18"></div>

                                <div class="div">
                                    <span class="label">Kota atau Kecamatan</span>
                                    <div class="div">
                                        <div class="field-city indropdown area-tsrc-dropdown alist" role="false" datatimer="1000">
                                            <div class="div ar-content">
                                                <input class="form-control br-rds8  txt-def-empty tsrc-dropdown label-dropdown" name="city" type="text" placeholder="Cari Kota atau Kecamatan">
                                                <input type="hidden" name="address_array" class="value-dropdown">
                                                
                                                <button class="cls cmd-clear-tsrc" role="off">
                                                    <span class="sli_icon-close"></span>
                                                </button>
                                            </div>
                                            <div class="dropdown dd-tsrc-dropdown">
                                                <div class="div inardropdown no-rd">
                                                    <ul></ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="div">
                                    <span class="label">Kodepos</span>
                                    <div class="div ar-content">
                                        <input type="text" name="address_kodepos" class="form-control br-rds8 address-kodepos-val w33p number" placeholder="">
                                    </div>
                                </div>

                            </div>
                            <input type="hidden" name="partner_id" class="partner_id" value="">
                            
                            <input type="submit" value="Submit" class="hide">
                        </form>

                    </div>

                    <div class="div h15"></div>
                </div>
                <div class="modal-footer no-br br-rdsb12">
                    
                    <button type="button" class="btn green modal-submit fix w110 is-loading br-rds8" role="off">
                        <span>SIMPAN</span>
                    </button>

                </div>
            </div>
        </div>
    </div>

    <!-- MODAL ADMIN -->
    <div class="modal fade new-modal" id="modaladmin-partner" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog w460" role="document">
            <div class="modal-content br-rds12 pd-tb15">
                <div class="modal-header txt-center no-br">
                    <div class="div">
                        <h2 class="modal-title">
                            <span class="fsize18">Admin</span>
                        </h2>
                        <div class="div">
                            <span class="label">Admin sebagai pengelola penuh pada dashboard aplikasi</span>
                        </div>
                    </div>
                    <button type="button" class="close pd-tbnull" style="position:absolute; right:20px;" data-dismiss="modal" aria-label="Close">
                        <span class="flaticon2-cross fsize12"></span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="div">
                        <form action="/api/partner/sunting/admin">

                            <div class="div pd-lr30">
                                <div class="div">
                                    <span class="label">Nama Admin</span>
                                    <div class="div ar-content">
                                        <input type="text" name="admin_name" class="form-control br-rds8 " placeholder="">
                                    </div>
                                </div>
                                <div class="div h18"></div>
                                <div class="div">
                                    <span class="label">Email</span>
                                    <div class="div ar-content">
                                        <input type="text" name="admin_email" class="form-control br-rds8 " placeholder="">
                                    </div>
                                </div>
                                <div class="div h18"></div>
                                <div class="div">
                                    <span class="label">Whatsapp</span>
                                    <div class="div ar-content">
                                        <input type="text" name="admin_phone" class="form-control br-rds8  w50px angka number" placeholder="">
                                    </div>
                                </div>

                            </div>
                            <input type="hidden" name="partner_id" class="partner_id" value="">
                            <input type="hidden" name="admin_id" value="">
                            <input type="hidden" name="admin_level" value="">
                            <input type="hidden" name="admin_sublevel" value="">

                            <input type="submit" value="Submit" class="hide">
                        </form>

                    </div>

                    <div class="div h15"></div>
                </div>
                <div class="modal-footer no-br br-rdsb12">
                    
                    <button type="button" class="btn green modal-submit fix w110 is-loading br-rds8" role="off">
                        <span>SIMPAN</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL PRODUK DISTRIBUTOR -->
    <div class="modal fade new-modal" id="modal-tproduct-dist" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog w460" role="document">
            <div class="modal-content br-rds12 pd-tb15 pd-lr15">
                <div class="modal-header txt-center no-br">
                    <div class="div">
                        <h2 class="modal-title">
                            <span class="fsize18">Daftar Produk Distributor</span>
                        </h2>
                        <div class="div">
                            <span class="label">Pilih produk untuk ditampilkan di halaman order Distributor</span>
                        </div>
                    </div>
                    <button type="button" class="close pd-tbnull" style="position:absolute; right:20px;" data-dismiss="modal" aria-label="Close">
                        <span class="flaticon2-cross fsize12"></span>
                    </button>
                </div>
                <div class="modal-body pd-b0">
                    <div class="div in-box">
                        <form action="/api/partner/sunting/product-distributor">

                            <div class="div">
                                <div class="div">
                                    <div class="div clr-float mg-b10">
                                        <div class="fl-left">
                                            <input type="text" class="br-1-sld-d br-rds12 br-ou-none h34 w180 pd-lr15 bx-sz-bx txt-srcpdp" placeholder="Cari Produk..."/>
                                        </div>
                                        <div class="fl-right h34">
                                            <div class="divH">
                                                <div class="tbl">
                                                    
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="in-arlist br-1-sld-d">
                                        <div class="load-area wth show">
                                            <div class="inar">
                                                <img src="/assets/svg/loading.blue.svg" alt="loading">
                                            </div>
                                        </div>
                                        <ul class="ar-selcheck-product">
                                            <!-- <li>
                                                <a href="#" class="fsize12 cmd-select-pddist" dataid="123" role="off">
                                                    <div class="in-select">
                                                        <div class="divH clr-float">
                                                            <div class="fl-left">
                                                                <div class="divH achk">
                                                                    <div class="tbl">
                                                                        <div class="intbl">
                                                                            <div class="cbhk">
                                                                                <i class="icn fa color-green flaticon2-check-mark"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="fl-left">
                                                                <div class="divH ar-img-pd">
                                                                    <div class="arimage-resize">
                                                                        <img src="" alt="image">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="fl-left">
                                                                <div class="divH">
                                                                    <div class="tbl">
                                                                        <div class="intbl">
                                                                            Produk
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="fl-right label fsize11">
                                                                <div class="divH">
                                                                    <div class="tbl">
                                                                        <div class="intbl">
                                                                            Rp19.000
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </a>
                                            </li> -->
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <input type="hidden" name="partner_id" class="partner_id" value="">
                            <input type="hidden" name="type" value="">
                            <input type="hidden" name="product_id" value="">
                            <input type="hidden" name="product_selected" value="">
                            <input type="hidden" name="product_deleted" value="">
                            <input type="submit" value="Submit" class="hide">
                        </form>

                    </div>
                </div>
                <div class="modal-footer no-br br-rdsb12 clr-float">
                    <div class="fl-left fsize12">
                        <div class="label">Produk dipilih <b class="value-item color-black">0</b></div>
                    </div>
                    <button type="button" class="fl-right btn green modal-submit fix w110 is-loading br-rds12" role="off" disabled="disabled">
                        <span>SIMPAN</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL CHANGE PRICE DISTRIBUTOR -->
    <div class="modal fade new-modal" id="modal-chpricedistributor" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog w460" role="document">
            <div class="modal-content br-rds12 pd-tb15 pd-lr15">
                <div class="modal-header txt-center no-br">
                    <div class="div">
                        <h2 class="modal-title">
                            <span class="fsize18">Tambahkan Update Harga</span>
                        </h2>
                        <div class="div">
                            <span class="label">Harga produk untuk distributor bisa di ubah sesuai dengan perjanjian kepada distributor</span>
                        </div>
                    </div>
                    <button type="button" class="close pd-tbnull" style="position:absolute; right:20px;" data-dismiss="modal" aria-label="Close">
                        <span class="flaticon2-cross fsize12"></span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="div">
                        <form action="/api/partner/sunting/chpricedistributor">

                            <div class="div">
                            
                                <div class="div">
                                    <div class="div">
                                        <div class="ddwn area-ddwn ar-content keep">
                                            <button class="btn br-rds8 cddwn" role="off">
                                                <label><span class="fsize14 color-black">Pilih Produk</span></label>
                                            </button>
                                            <div class="ddwn-pg area-ddwn-page">
                                                <div class="ddwn-header">
                                                    <div class="inhd">
                                                        <button height="auto" type="button"></button>
                                                        <input type="text" placeholder="Cari Produk" class="ddwn-tsrc">
                                                    </div>
                                                </div>
                                                <ul></ul>
                                            </div>
                                            <input type="hidden" class="value-dropdown" name="distributor_product" value="">
                                        </div>
                                    </div>
                                </div>

                                <div class="div area-h-price">

                                    <div class="div h18"></div>
                                    <div class="div">
                                        <div class="div w50px">
                                            <span class="label hide font-wg25">Ubah harga dari <b class="font-wg5 color-black">Rp<span class="vlabel-price">0</span></b> menjadi</span>
                                            <div class="div ar-content">
                                                <input type="text" name="distributor_price" class="form-control br-rds8 rupiahkeyup" placeholder="Rp..." disabled="disabled">
                                            </div>
                                        </div>
                                    </div>

                                </div>

                            </div>
                            <input type="hidden" name="partner_id" class="partner_id" value="">
                            <input type="hidden" name="status_price" value="false">
                            <input type="hidden" name="type" value="">
                            <input type="hidden" name="product_id" value="">
                            <input type="submit" value="Submit" class="hide">
                        </form>

                    </div>
                </div>
                <div class="modal-footer no-br br-rdsb12">
                    
                    <button type="button" class="btn green modal-submit fix w110 is-loading br-rds12" role="off">
                        <span>SIMPAN</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- modal delete -->
    <div class="modal fade new-modal" id="modaldelete" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog w420" role="document">
            <div class="modal-content br-rds12 pd-tb15">
                <div class="modal-header txt-center no-br">
                    <div class="div">
                        <h2 class="modal-title">
                            <span class="fsize18 label-title">Title</span>
                        </h2>
                        <div class="div">
                            <span class="label label-subtitle">Subtitle</span>
                        </div>
                    </div>
                    <button type="button" class="close pd-tbnull" style="position:absolute; right:20px;" data-dismiss="modal" aria-label="Close">
                        <span class="flaticon2-cross fsize12"></span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="div">
                        <form action="">

                            <div class="div text-center">

                                <span class="label-info">Info</span>

                            </div>
                            <input type="hidden" name="partner_id" class="partner_id" value="">
                            <input type="submit" value="Submit" class="hide">
                        
                            <div class="hide area-input">

                            </div>
                        </form>
                        
                    </div>

                </div>
                <div class="modal-footer no-br br-rdsb12">
                    
                    <button type="button" class="btn bc-red modal-submit fix w110 is-loading br-rds12" role="off">
                        <span>Ya, Hapus</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

</main>

<script>
$(document).ready(function()
{


    function listproductinchdistributor()
    {
        var partnerid = $("body").find("input[name='partner_id']").val();
        var $URL = config.apps.URL_API + '/api/product/view-list-distributor?companyid=' + partnerid;

        // form send
        var $t = FormSending("","GET","key","",$URL);
        $t.success(function(n)
        {
            // console.log(n);
            var list = n.response.list;
                
            var li = '';
            $.each(list, function(i, item)
            {
                li += '<li aria-selected="false" dataid="'+item.id+'"><button role="off"  dataid="'+item.id+'" dataprice="'+(formatRupiah(item.price_reseller))+'"><span>'+item.name+'</span></button></li>';
            })
            $('#modal-chpricedistributor').find('.area-ddwn-page ul').html(li);
        });
        $t.error(function(n)
        {
            console.log(n.responseJSON.message);
        });
    }

    

    function vcontent(e)
    {
        var q = e;
        var area = $('.content-view-partner'),
        crumb = area.find('.brcumb .tbl .intbl .div');

        var contentCrumb = '<span class="ic sli_icon-folder"></span><a href="/"><span>Dashboard</span></a><span class="bts"><span class="ic fas fa-circle"></span></span><span class="ic sli_icon-folder"></span><a href="/dashboard/partner"><span>Partner</span></a><span class="bts"><span class="ic fas fa-circle"></span></span><span class="label"><span class="label-partner_name">'+q.comp.name+'</span></span>';

        var contentTop = '<div class="nav-btn-r"><div class="dropdown"><a class="simple-dropdown" data-toggle="dropdown"><i class="icon-more_vert_outlined icon"></i></a><div class="dropdown-menu dropdown-menu-right dropdown-menu-lg-left"><a class="dropdown-item pdtb5 cmd-modal" href="#" data-toggle="modal" data-target="#modalname"><div class="div"><span>Sunting</span><span class="ic-r sli_icon-pencil"></span></div></a></div></div></div>';

        contentTop += '<div class="div box pdt35">';

                contentTop += '<div class="div">';
                contentTop += '<div class="div ttl"><span><span class="aic '+ ( q.comp.verify === 1 ? 'sc' : 'vf' ) +'"><span class="ic sli_icon-check sc"></span><span class="ic sli_icon-clock vf" title="Menunggu Verifikasi"></span></span></span><b class="fsize16 label-name">'+q.comp.name+'</b></div>';

                contentTop += '<div class="div label"><span class="ic sli_icon-badge"></span><span class="fsize14">'+q.comp.type+'</span><span class="dot brc w6"></span><span class="fsize12 label-nosurat">'+q.comp.nosurat+'</span></div></div>';
                
                contentTop += '<div class="div h8"></div>';
                
                contentTop += '<div class="div"><div class="div clr-float">';

                contentTop += '<div class="fl-left '+(q.comp.expire === 0 ? 'hide' : '')+'"><div class="div"><span class="pd5 bc-yw label br-rds4">Batas akhir pembayaran <span class="color-black label-expire">'+q.comp.expire+'</span> hari setelah proses order berhasil</span></div></div>';

                contentTop += '<div class="fl-right label fsize12"><span class="fsize11 up-txt">'+q.comp.admin+'</span><span class="dot brc w6"></span><span>'+q.comp.date+'</span></div></div></div>';

        contentTop += '</div>';

        area.find('.content-top .card-body').html(contentTop);

        //content left
        var contentLeft = '';

        // //content left expire payment
        // contentLeft += '<div class="div"><div class="card body-pd-0 boxssml"><div class="card-body"><div class="nav-btn-r"><div class="dropdown"><a class="simple-dropdown" data-toggle="dropdown"><i class="icon-more_vert_outlined icon"></i></a><div class="dropdown-menu dropdown-menu-right dropdown-menu-lg-left"><a class="dropdown-item pdtb5 cmd-modal" href="#" data-toggle="modal" data-target="#modalexppayment"><div class="div"><span>Sunting</span><span class="ic-r sli_icon-pencil"></span></div></a></div></div></div>';

        // contentLeft += '<div class="div box"><div class="div"><div class="div label txud ttl"><span>Informasi</span></div><div class="div">';

        // contentLeft += '<div class="div"><span class="dot w6 brc rt"></span><span>Batas akhir pembayaran <b>'+q.comp.expire+'</b> hari setelah proses order</span></div>';

        // contentLeft +=' </div></div></div></div></div></div>';

        //content left kontak
        contentLeft += '<div class="div"><div class="card body-pd-0 boxssml"><div class="card-body"><div class="nav-btn-r"><div class="dropdown"><a class="simple-dropdown" data-toggle="dropdown"><i class="icon-more_vert_outlined icon"></i></a><div class="dropdown-menu dropdown-menu-right dropdown-menu-lg-left"><a class="dropdown-item pdtb5 cmd-modal" href="#" data-toggle="modal" data-target="#modalcontact"><div class="div"><span>Sunting</span><span class="ic-r sli_icon-pencil"></span></div></a></div></div></div>';

        contentLeft += '<div class="div box"><div class="div"><div class="div label txud ttl"><span>Kontak</span></div><div class="div">';

        contentLeft += '<div class="div"><span class="dot w6 brc rt"></span><span class="label-contact_phone">'+q.comp.contact.phone+'</span></div>';

        contentLeft += '<div class="div '+( q.comp.contact.email === '' ? 'hide' : '')+'"><span class="dot w6 brc rt"></span><span class="label-contact_email">'+q.comp.contact.email+'</span></div>';

        contentLeft +=' </div></div></div></div></div></div>';

        //content Left owner 
        contentLeft += '<div class="div"><div class="card body-pd-0 boxssml"><div class="card-body"><div class="nav-btn-r"><div class="dropdown"><a class="simple-dropdown" data-toggle="dropdown"><i class="icon-more_vert_outlined icon"></i></a><div class="dropdown-menu dropdown-menu-right dropdown-menu-lg-left"><a class="dropdown-item pdtb5 cmd-modal" href="#" data-toggle="modal" data-target="#modalowner"><div class="div"><span>Sunting</span><span class="ic-r sli_icon-pencil"></span></div></a></div></div></div>';

        contentLeft += '<div class="div box"><div class="div"><div class="div label txud ttl"><span>Owner</span></div><div class="div">';
                                        
        contentLeft += '<div class="div"><span class="dot w6 brc rt"></span><b class="label-owner_name">'+q.comp.owner+'</b></div>';

        contentLeft += '<div class="div"><span class="dot w6 brc rt"></span><span class="label-owner_phone">'+q.comp.owner_contact.phone+'</span></div>';

        contentLeft += '<div class="div '+(q.comp.owner_contact.email === '' ? 'hide' : '')+'"><span class="dot w6 brc rt"></span><span class="label-owner_email">'+q.comp.owner_contact.email+'</span></div>';

        contentLeft +=' </div></div></div></div></div></div>';


        // CONTENT ADMIN
        contentLeft += '<div class="div"><div class="card body-pd-0 boxssml"><div class="card-body"><div class="nav-btn-r"><div class="dropdown"><a class="simple-dropdown" data-toggle="dropdown"><i class="icon-more_vert_outlined icon"></i></a><div class="dropdown-menu dropdown-menu-right dropdown-menu-lg-left"><a class="dropdown-item pdtb5 cmd-modal" href="#" data-toggle="modal" data-target="#modaladmin-partner"><div class="div"><span>Sunting</span><span class="ic-r sli_icon-pencil"></span></div></a></div></div></div>';

        contentLeft += '<div class="div box"><div class="div"><div class="div label txud ttl"><span>Administrator</span></div><div class="div">';
                                        
        contentLeft += '<div class="div"><span class="dot w6 brc rt"></span><b class="label-admin_name">'+q.comp.administrator.name+'</b></div>';
        
        contentLeft += '<div class="div "><span class="dot w6 brc rt"></span><span class="label-admin_email">'+q.comp.administrator.email+'</span></div>';

        contentLeft += '<div class="div"><span class="dot w6 brc rt"></span><span class="label-admin_phone">'+q.comp.administrator.phone+'</span></div>';

        contentLeft += '<div class="hide">';
            contentLeft +='<input type="hidden" class="label-admin_id" value="'+q.comp.administrator.id+'" />';
            contentLeft +='<input type="hidden" class="label-admin_level" value="'+q.comp.administrator.level+'" />';
            contentLeft +='<input type="hidden" class="label-admin_sublevel" value="'+q.comp.administrator.sublevel+'" />';
        contentLeft += '</div>';

        contentLeft +=' </div></div></div></div></div></div>';

        //content Left address
        // contentLeft += '<div class="div"><div class="card body-pd-0 boxssml"><div class="card-body"><div class="nav-btn-r"><div class="dropdown"><a class="simple-dropdown" data-toggle="dropdown"><i class="icon-more_vert_outlined icon"></i></a><div class="dropdown-menu dropdown-menu-right dropdown-menu-lg-left"><a class="dropdown-item pdtb5 cmd-modal" href="#" data-toggle="modal" data-target="#modaladdress-partner"><div class="div"><span>Sunting</span><span class="ic-r sli_icon-pencil"></span></div></a></div></div></div>';

        // contentLeft += '<div class="div box"><div class="div"><div class="div label txud ttl"><span>Alamat</span></div><div class="div">';

        // contentLeft += '<div class="div"><span class="label-address">'+q.comp.address.name+'</span></div>';

        // contentLeft += '<div class="div"></span><span class="label-address_kecamatan">'+q.comp.address.kecamatan+'</span><span class="dot w6 brc"></span><span class="label-address_city">'+q.comp.address.city+'</span></div>';

        // contentLeft += '<div class="div"></span><span class="label-address_provinsi">'+q.comp.address.provinsi+'</span><span class="dot w6 brc"></span><span class="label-address_kodepos">'+q.comp.address.kodepos+'</span><div class="hide label-address_array">'+q.comp.address.array+'</div></div>';

        // contentLeft +=' </div></div></div></div></div></div>';


        //view left
        area.find('.content-bottom .ctn-body.fl-left').html(contentLeft);

        
        //CONTENT RIGHT
        var contentRightTab = '';

        contentRightTab +='<div class="nav nav-pills nav-danger" id="danger-v-pills-tab" role="tablist" aria-orientation="vertical">';

            // contentRightTab += '<a class="nav-link" id="danger-v-pills-home-tab" data-toggle="pill" href="#danger-v-pills-home" role="tab" aria-controls="danger-v-pills-home" aria-selected="true"><span class="ic sli_icon-user"></span><span>Admin</span></a>';

            contentRightTab += '<a class="nav-link active" id="danger-v-pills-tproduct-tab" data-toggle="pill" href="#danger-v-pills-tproduct" role="tab" aria-controls="danger-v-pills-tproduct" aria-selected="false"><span class="ic sli_icon-bag"></span><span>Produk</span></a>';

            contentRightTab += '<a class="nav-link" id="danger-v-pills-product-tab" data-toggle="pill" href="#danger-v-pills-product" role="tab" aria-controls="danger-v-pills-product" aria-selected="false"><span class="ic fa flaticon2-indent-dots"></span><span>Harga Distributor</span></a>';

            contentRightTab += '<a class="nav-link" id="danger-v-pills-address-tab" data-toggle="pill" href="#danger-v-pills-address" role="tab" aria-controls="danger-v-pills-address" aria-selected="false"><span class="ic sli_icon-pointer"></span><span>Alamat</span></a>';

        contentRightTab += '</div>';
        area.find('.content-bottom .ctn-body.fl-right .tabs').html(contentRightTab);

        //tab content admin

        var contentTab = '';

        // contentTab += '<div class="tab-pane fade" id="danger-v-pills-home" role="tabpanel" aria-labelledby="danger-v-pills-home-tab"><div class="div">'; 

        //     contentTab += '<div class="nav-btn-r t0 r0"><div class="dropdown"><a class="simple-dropdown" data-toggle="dropdown"><i class="icon-more_vert_outlined icon"></i></a><div class="dropdown-menu dropdown-menu-right dropdown-menu-lg-left"><a class="dropdown-item pdtb5 cmd-modal" href="#" data-toggle="modal" data-target="#modaladmin-partner"><div class="div"><span>Sunting</span><span class="ic-r sli_icon-pencil"></span></div></a></div></div></div>';

        //     contentTab += '<div class="div box pd0"><div class="div"><div class="div ttl"><span><span class="aic '+(q.comp.administrator.register === 1 ? 'sc' : 'vf')+'"><span class="ic sli_icon-check sc" title="Terverifikasi"></span><span class="ic sli_icon-clock vf" title="Menunggu Verifikasi"></span></span></span><b class="label-admin_name">'+q.comp.administrator.name+'</b></div><div class="div"><div class="div"><span class="dot w6 brc rt"></span><span class="label-admin_email">'+q.comp.administrator.email+'</span></div><div class="div"><span class="dot w6 brc rt"></span><span class="label-admin_phone">'+q.comp.administrator.phone+'</span></div></div></div></div>';

        //     contentTab += '<div class="hide">';
        //         contentTab +='<input type="hidden" class="label-admin_id" value="'+q.comp.administrator.id+'" />';
        //         contentTab +='<input type="hidden" class="label-admin_level" value="'+q.comp.administrator.level+'" />';
        //         contentTab +='<input type="hidden" class="label-admin_sublevel" value="'+q.comp.administrator.sublevel+'" />';
        //     contentTab += '</div>';
        
        // contentTab += '</div></div>';


        // tab product
        contentTab += '<div class="tab-pane fade show active" id="danger-v-pills-tproduct" role="tabpanel" aria-labelledby="danger-v-pills-tproduct-tab"><div class="div">'; 

            contentTab += '<input type="hidden" value="1000008,1000015" name="tab-product-list"/>';
            contentTab += '<div class="div">';
                contentTab += '<div class="box-tabing" role="'+(q.comp.listpdistributor ==='' ? 'false' : 'true')+'">';
                    
                    contentTab += '<div class="in-box tab-ft text-center">';
                        contentTab += '<div class="div">';
                            contentTab += '<div class="div"><img src="/assets/svg/empty.svg" /></div><div class="div h18"></div>';
                            contentTab += '<div class="div text"><span class="fsize16">Tambahkan produk Distributor</span></div><div class="div h18"></div>';
                            contentTab += '<div class="div"><button class="no-br br-rds12 bc-green cmd-modal" data-toggle="modal" data-target="#modal-tproduct-dist" data-type="add">Tambah</button></div>';
                        contentTab += '</div>';
                    contentTab += '</div>';

                    contentTab += '<div class="in-box tab-vl">';
                        contentTab += '<div class="div"><div class="div h18"></div>';
                            contentTab += '<div class="div clr-float">';
                                contentTab += '<div class="fl-left w50px"><input placeholder="Cari Produk" class="form-control br-rds8 txt-srcpdp" /></div>';
                                contentTab += '<div class="fl-right"><button class="no-br br-rds4 bc-green cmd-modal" data-toggle="modal" data-target="#modal-tproduct-dist" data-type="edit"><span class="ic-abs fas fa-plus"></span><span class="sli_icon-bag"></span></button></div>';
                            contentTab += '</div>';
                            contentTab += '<div class="div h20"></div>';
                            contentTab += '<div class="div">';

                                contentTab += '<ul>';
                                // contentTab += listPDist(q.comp.listproduct);
                                // $.each(q.comp.listproduct, function(i, item)
                                // {
                                //     contentTab += '<li class="'+ ( i % 2 === 0 ? 'sling' : '') +'">';
                                //         contentTab += '<div class="div clr-float">';
                                //             contentTab += '<div class="fl-left">';
                                //                 contentTab += '<div class="div"><div class="div"><b class="label-name">'+item.name+'</b></div><div class="div fsize12"><span class="label">Dari Harga</span> <span>'+formatRupiah(item.price,'')+'</span> <span class="label">menjadi</span> <span>'+formatRupiah(item.uprice,'')+'</span></div></div>';
                                //             contentTab += '</div>';
                                //             // contentTab += '<div class="fl-right"><button class="no-br br-rds4 cmd-modal" data-toggle="modal" data-target="#modal-chpricedistributor" data-type="edit" dataid="'+item.id+'" data-uprice="'+formatRupiah(item.uprice)+'" data-price="'+(formatRupiah(item.price))+'" data-label="'+item.name+'"><div class="tbl"><div class="intbl"><span class="flaticon-more-1"></span></div></div></button></div>';

                                //             contentTab += '<div class="fl-right"><div class="dropdown"><a class="simple-dropdown" data-toggle="dropdown" aria-expanded="false"><span class="flaticon-more-1"></span></a><div class="dropdown-menu dropdown-menu-right dropdown-menu-lg-left" style="will-change: transform;"><a class="dropdown-item pdtb5 cmd-modal" data-toggle="modal" data-target="#modal-chpricedistributor" data-type="edit" dataid="'+item.id+'" data-uprice="'+formatRupiah(item.uprice)+'" data-price="'+(formatRupiah(item.price))+'" data-label="'+item.name+'"><div class="div"><span>Sunting</span><span class="ic-r sli_icon-pencil"></span></div></a><a class="dropdown-item pdtb5 cmd-modal color-red" href="#" data-toggle="modal" data-target="#modaldelete" dataid="'+item.id+'" data-title="Hapus" data-subtitle="Proses tidak bisa dibatalkan setelah berhasil dihapus" data-info="Anda yakin ingin menghapus <b>'+item.name+'</b>?" data-url="/api/partner/sunting/delete-distprice"><div class="div"><span>Hapus</span><span class="ic-r sli_icon-trash"></span></div></a></div></div></div>';

                                //         contentTab += '</div>';
                                //     contentTab +='</li>';
                                // });
                                    

                                contentTab += '</ul>';

                            contentTab +='</div>';

                        contentTab += '</div>';
                    contentTab += '</div>';

                contentTab += '</div>';
            contentTab += '</div>';

        contentTab += '</div></div>';


        // tab harga distributor product
        contentTab += '<div class="tab-pane fade" id="danger-v-pills-product" role="tabpanel" aria-labelledby="danger-v-pills-product-tab"><div class="div">'; 

            
            contentTab += '<div class="div">';
                contentTab += '<div class="box-tabing" role="'+(q.comp.listproduct ==='' ? 'false' : 'true')+'">';
                    
                    contentTab += '<div class="in-box tab-ft text-center">';
                        contentTab += '<div class="div">';
                            contentTab += '<div class="div"><img src="/assets/svg/empty.svg" /></div><div class="div h18"></div>';
                            contentTab += '<div class="div text"><span class="fsize16">Tambah daftar produk yang akan dirubah harga distributor</span></div><div class="div h18"></div>';
                            contentTab += '<div class="div"><button class="no-br br-rds12 bc-green cmd-modal" data-toggle="modal" data-target="#modal-chpricedistributor" data-type="add">Tambah</button></div>';
                        contentTab += '</div>';
                    contentTab += '</div>';

                    contentTab += '<div class="in-box tab-vl">';
                        contentTab += '<div class="div"><div class="div h18"></div>';
                            contentTab += '<div class="div clr-float">';
                                contentTab += '<div class="fl-left w50px"><input placeholder="Cari Produk" class="form-control br-rds8 txt-srcpdp" /></div>';
                                contentTab += '<div class="fl-right"><button class="no-br br-rds4 bc-green cmd-modal" data-toggle="modal" data-target="#modal-chpricedistributor" data-type="add"><span class="ic-abs fas fa-plus"></span><span class="sli_icon-bag"></span></button></div>';
                            contentTab += '</div>';
                            contentTab += '<div class="div h20"></div>';
                            contentTab += '<div class="div">';

                                contentTab += '<ul>';
                                // contentTab += listPDist(q.comp.listproduct);
                                // $.each(q.comp.listproduct, function(i, item)
                                // {
                                //     contentTab += '<li class="'+ ( i % 2 === 0 ? 'sling' : '') +'">';
                                //         contentTab += '<div class="div clr-float">';
                                //             contentTab += '<div class="fl-left">';
                                //                 contentTab += '<div class="div"><div class="div"><b class="label-name">'+item.name+'</b></div><div class="div fsize12"><span class="label">Dari Harga</span> <span>'+formatRupiah(item.price,'')+'</span> <span class="label">menjadi</span> <span>'+formatRupiah(item.uprice,'')+'</span></div></div>';
                                //             contentTab += '</div>';
                                //             // contentTab += '<div class="fl-right"><button class="no-br br-rds4 cmd-modal" data-toggle="modal" data-target="#modal-chpricedistributor" data-type="edit" dataid="'+item.id+'" data-uprice="'+formatRupiah(item.uprice)+'" data-price="'+(formatRupiah(item.price))+'" data-label="'+item.name+'"><div class="tbl"><div class="intbl"><span class="flaticon-more-1"></span></div></div></button></div>';

                                //             contentTab += '<div class="fl-right"><div class="dropdown"><a class="simple-dropdown" data-toggle="dropdown" aria-expanded="false"><span class="flaticon-more-1"></span></a><div class="dropdown-menu dropdown-menu-right dropdown-menu-lg-left" style="will-change: transform;"><a class="dropdown-item pdtb5 cmd-modal" data-toggle="modal" data-target="#modal-chpricedistributor" data-type="edit" dataid="'+item.id+'" data-uprice="'+formatRupiah(item.uprice)+'" data-price="'+(formatRupiah(item.price))+'" data-label="'+item.name+'"><div class="div"><span>Sunting</span><span class="ic-r sli_icon-pencil"></span></div></a><a class="dropdown-item pdtb5 cmd-modal color-red" href="#" data-toggle="modal" data-target="#modaldelete" dataid="'+item.id+'" data-title="Hapus" data-subtitle="Proses tidak bisa dibatalkan setelah berhasil dihapus" data-info="Anda yakin ingin menghapus <b>'+item.name+'</b>?" data-url="/api/partner/sunting/delete-distprice"><div class="div"><span>Hapus</span><span class="ic-r sli_icon-trash"></span></div></a></div></div></div>';

                                //         contentTab += '</div>';
                                //     contentTab +='</li>';
                                // });
                                    

                                contentTab += '</ul>';

                            contentTab +='</div>';

                        contentTab += '</div>';
                    contentTab += '</div>';

                contentTab += '</div>';
            contentTab += '</div>';

        contentTab += '</div></div>';

        // tab address
        contentTab += '<div class="tab-pane fade" id="danger-v-pills-address" role="tabpanel" aria-labelledby="danger-v-pills-address-tab"><div class="div">'; 

        contentTab += '<div class="nav-btn-r t0 r0"><div class="dropdown"><a class="simple-dropdown" data-toggle="dropdown"><i class="icon-more_vert_outlined icon"></i></a><div class="dropdown-menu dropdown-menu-right dropdown-menu-lg-left"><a class="dropdown-item pdtb5 cmd-modal" href="#" data-toggle="modal" data-target="#modaladdress-partner"><div class="div"><span>Sunting</span><span class="ic-r sli_icon-pencil"></span></div></a></div></div></div>';

        contentTab += '<div class="div box pd0"><div class="div"><div class="div"><div class="div"><span class="label-address">'+q.comp.address.name+'</span></div></div><div class="div"><span class="label-address_kecamatan">'+q.comp.address.kecamatan+'</span><span class="dot w6 brc"></span><span class="label-address_city">'+q.comp.address.city+'</span></div><div class="div"><span class="label-address_provinsi">'+q.comp.address.provinsi+'</span><span class="dot w6 brc"></span><span class="label-address_kodepos">'+q.comp.address.kodepos+'</span></div></div></div>';

        contentTab += '<div class="hide label-address_array">'+q.comp.address.array+'</div>';
        contentTab += '</div></div>';

        
        crumb.html(contentCrumb);
        area.find('.content-bottom .ctn-body.fl-right .tab-content').html(contentTab);
    }


    function listPDist(e)
    {

        var tab = $('#danger-v-pills-product');
        var li = '';

        $.each(e, function(i, item)
        {
            li += '<li class="'+ ( i % 2 === 0 ? 'sling' : '') +'">';
                li += '<div class="div clr-float">';
                    li += '<div class="fl-left">';
                        li += '<div class="div"><div class="div"><b class="label-name">'+item.name+'</b></div><div class="div fsize12"><span class="label">Dari Harga</span> <span>'+formatRupiah(item.price,'')+'</span> <span class="label">menjadi</span> <span>'+formatRupiah(item.uprice,'')+'</span></div></div>';
                    li += '</div>';
                    

                    li += '<div class="fl-right"><div class="dropdown"><a class="simple-dropdown" data-toggle="dropdown" aria-expanded="false"><span class="flaticon-more-1"></span></a><div class="dropdown-menu dropdown-menu-right dropdown-menu-lg-left" style="will-change: transform;"><a class="dropdown-item pdtb5 cmd-modal" data-toggle="modal" data-target="#modal-chpricedistributor" data-type="edit" dataid="'+item.id+'" data-uprice="'+formatRupiah(item.uprice)+'" data-price="'+(formatRupiah(item.price))+'" data-label="'+item.name+'"><div class="div"><span>Sunting</span><span class="ic-r sli_icon-pencil"></span></div></a><a class="dropdown-item pdtb5 cmd-modal color-red" href="#" data-toggle="modal" data-target="#modaldelete" dataid="'+item.id+'" data-title="Hapus" data-subtitle="Proses tidak bisa dibatalkan setelah berhasil dihapus" data-info="Anda yakin ingin menghapus <b>'+item.name+'</b>?" data-url="/api/partner/sunting/delete-distprice"><div class="div"><span>Hapus</span><span class="ic-r sli_icon-trash"></span></div></a></div></div></div>';

                li += '</div>';
            li +='</li>';
        });

        tab.find('.box-tabing ul').html( li );
    }


    function getprofile()
    {

        var tokenu = window.location.href,
        tokenu = tokenu.split("token=")

        var contenttop = '';

        $.ajax({
            type: "GET",
            url: config.apps.URL_API + "/api/partner/view?token=" + tokenu[1],
            headers: {
                "Content-Type":"application/json",
                "key":getaccount().key
            },
            cache: false,
            timeout: 18000,
            dataType: "JSON",
            success: function(n)
            {
                // console.log(n.response.comp);
                $('.label-partner_name').html(n.response.comp.name);
                vcontent(n.response);
                listPDist(n.response.comp.listproduct);
                listProductToDist(n.response.comp.listpdistributor);
                $('body').find('*[name="partner_id"]').val(n.response.comp.id);

                //list select product for price distributor
                listproductinchdistributor();

            },
            error: function(n)
            {
                console.log(n.responseJSON.message);
                var link = config.apps.URL + '/dashboard/partner';
                var content = pageNotFound(link);

                $('.moby__content-body').html(content);
                
            }
        })
    }
    // call profile
    getprofile();

    function setactiveaside()
    {

        //
        var locx = config.apps.URL + '/dashboard/partner';
        var areax = $('.moby__side-bar ul').find('a[href="'+locx+'"]');
        area_ext = areax.parents('.collapse');

        area_ext.addClass('show');
        $('.moby__side-bar ul').find('a[href="#'+area_ext.attr('id')+'"]').addClass('active');
        $('.moby__side-bar ul').find('a[href="#'+area_ext.attr('id')+'"]').attr('aria-expanded', 'true');
        areax.addClass('active');
    }

    setTimeout(function(){ setactiveaside(); }, 500);


    //
    $('body').on('click', '.cmd-modal[data-target="#modaldelete"]', function()
    {
        var cmd = $(this),
        tr = cmd.parents('.tr'),
        modal = $(cmd.attr('data-target')),
        card = cmd.parents('.card-body');

        //
        $(modal).find('form').attr('action', cmd.attr('data-url'));
        $(modal).find('form .area-input').html('');
        $(modal).find('form .area-input').html('<input type="hidden" name="id" value="'+cmd.attr('dataid')+'" />');
        $(modal).find('.label-title').html(cmd.attr('data-title'));
        $(modal).find('.label-subtitle').html(cmd.attr('data-subtitle'));
        $(modal).find('.label-info').html(cmd.attr('data-info'));
        
    });
    
    //modal
    // modal notename
    $('body').on('click', '.cmd-modal[data-target="#modalname"]', function()
    {
        var cmd = $(this),
        tr = cmd.parents('.tr'),
        modal = $(cmd.attr('data-target')),
        card = cmd.parents('.card-body');

        //

        $(modal).find('input[name="name"]').val(card.find('.label-name').html());
        $(modal).find('input[name="nosurat"]').val(card.find('.label-nosurat').html());
        $(modal).find('input[name="expire_days"]').val(card.find('.label-expire').html());
        
    });


    //modal kontak
    $('body').on('click', '.cmd-modal[data-target="#modalcontact"]', function()
    {
        var cmd = $(this),
        tr = cmd.parents('.tr'),
        modal = $(cmd.attr('data-target')),
        card = cmd.parents('.card-body');

        //

        $(modal).find('input[name="contact_phone"]').val(card.find('.label-contact_phone').html());
        $(modal).find('input[name="contact_email"]').val(card.find('.label-contact_email').html());
        
    });


    // modal onwer
    $('body').on('click', '.cmd-modal[data-target="#modalowner"]', function()
    {
        var cmd = $(this),
        tr = cmd.parents('.tr'),
        modal = $(cmd.attr('data-target')),
        card = cmd.parents('.card-body');

        //

        $(modal).find('input[name="owner_name"]').val(card.find('.label-owner_name').html());
        $(modal).find('input[name="owner_phone"]').val(card.find('.label-owner_phone').html());
        $(modal).find('input[name="owner_email"]').val(card.find('.label-owner_email').html());
        
    });


    $('body').on('click', '.cmd-modal[data-target="#modaladdress-partner"]', function()
    {
        var cmd = $(this),
        tr = cmd.parents('.tr'),
        modal = $(cmd.attr('data-target')),
        card = cmd.parents('.card-body');

        //

        $(modal).find('textarea[name="address"]').val(card.find('.label-address').html());
        $(modal).find('input[name="city"]').val(card.find('.label-address_kecamatan').html() + ', ' + card.find('.label-address_city').html() + ', ' + card.find('.label-address_provinsi').html());
        $(modal).find('input[name="address_kodepos"]').val(card.find('.label-address_kodepos').html());
        $(modal).find('input[name="address_array"]').val(card.find('.label-address_array').html());
        $(modal).find('button.cmd-clear-tsrc').show();
        
    });


    $('body').on('click', '.cmd-modal[data-target="#modaladmin-partner"]', function()
    {
        var cmd = $(this),
        tr = cmd.parents('.tr'),
        modal = $(cmd.attr('data-target')),
        card = cmd.parents('.card-body');

        //

        $(modal).find('input[name="admin_name"]').val(card.find('.label-admin_name').html());
        $(modal).find('input[name="admin_email"]').val(card.find('.label-admin_email').html());
        $(modal).find('input[name="admin_phone"]').val(card.find('.label-admin_phone').html());
        $(modal).find('input[name="admin_level"]').val(card.find('.label-admin_level').val());
        $(modal).find('input[name="admin_sublevel"]').val(card.find('.label-admin_sublevel').val());
        $(modal).find('input[name="admin_id"]').val(card.find('.label-admin_id').val());

        
    });


    $('body').on('click', '.cmd-modal[data-target="#modal-chpricedistributor"]', function()
    {
        var cmd = $(this),
        type = cmd.attr('data-type'),
        tr = cmd.parents('.tr'),
        modal = $(cmd.attr('data-target')),
        card = cmd.parents('.card-body');

        modal.find('input[name="type"]').val(type);
        modal.find('label.error').remove();
        modal.find('.br-error').removeClass('br-error');
        modal.find('.area-ddwn-page li').attr('aria-selected','false');

        if( type === 'add')
        {
            modal.find('.modal-title span').html('Tambah Update Harga');
            modal.find('.area-ddwn button.btn').removeAttr('disabled');
            modal.find('.area-ddwn button.btn span').html('Pilih Produk');
            modal.find('.area-h-price span.label').addClass('hide');
            modal.find('input[name="distributor_price"]').val('');
            modal.find('input[name="distributor_price"]').attr('disabled','disabled');
            modal.find('input[name="product_id"]').val('');
            modal.find('input[name="distributor_product"]').val('');
            modal.find('input[name="status_price"]').val('false');

        }
        else
        {
            
            // modal.find('.ddwn-header li').attr('aria-selected','false');
            modal.find('.modal-title span').html('Perbarui Update Harga');
            modal.find('.area-ddwn button.btn').attr('disabled','disabled');
            modal.find('li[dataid="'+cmd.attr('dataid')+'"]').attr('aria-selected','true');
            modal.find('.area-ddwn button.btn span').html(cmd.attr('data-label'));
            modal.find('.vlabel-price').html(cmd.attr('data-price'));
            modal.find('.area-h-price span.label').removeClass('hide');
            modal.find('input[name="distributor_price"]').val(cmd.attr('data-uprice'));
            modal.find('input[name="distributor_price"]').removeAttr('disabled');
            modal.find('input[name="product_id"]').val(cmd.attr('dataid'));
            modal.find('input[name="distributor_product"]').val(cmd.attr('dataid'));
            modal.find('input[name="status_price"]').val('true');
        }
        // //
        // console.log(cmd.attr('data-type'));
        
    });



    // submit
    $.validator.addMethod("customemail", function(t, n)
    {
            t=t.trim();
            var r= $(n).prop("required"),
            i=/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(t);
            return r?""!==t&&i:""===t||i
    }, "Sorry, I've enabled very strict email validation");

    $.validator.addMethod("selectoptmin", function(value, element, arg)
    {
        return arg !== value;
    }, "Value must not equal arg.");

    $.validator.addMethod("notnullhidden", function(value, element, arg)
    {
    return arg !== value;

    }, "Value must not equal arg.");


    

    //
    $('body').on('click', '.modal-submit', function(e)
    {
        e.preventDefault();

        var cmd = $(this),
        modal = cmd.parents('.new-modal.show'),
        form = modal.find('form');

        form.submit();
        

    });


    // keyup expire days
    $('input[name="expire_days"]').keyup(function(e)
    {   
        numbFNoZeroWO($(this));
    });


    //submit modal name 
    $('#modalname form').submit( function()
    {
        var form = $(this),
        modal = form.parents('.new-modal.show'),
        button = modal.find('button.modal-submit');


        form.validate(validateformname);
        form.valid();

        cekingsubmit = form.valid();

        if( cekingsubmit )
        {

            ceksubmitlabel(form);
        }

    });

    // valiadte form name
    var validateformname = 
    {
        
        rules:{
            name:{
                required:!0,
                minlength:5,
                normalizer:r,
            },
            nosurat:{
                required:!0,
                minlength:5,
                normalizer:r,
            }
            
        },
        messages:{
            name:'Harus diisi sekurangnya 5 karakter',
            nosurat:'Harap diisi nomor surat perjanjian',
        },
        errorPlacement:function(t,n)
        {
            $(n).parents('.ar-content').find('label.error').remove();
            $(n).parents('.ar-content').append(t);
            // console.log(n);
        }
        
    }


    // cek submit form name
    function ceksubmitlabel(el)
    {
        var form = el,
        modal = form.parents('.new-modal.show'),
        button = modal.find('button.modal-submit'),
        card = $('body').find('.cmd-modal[data-target="#'+modal.attr('id')+'"]').parents('.card-body');


        if( button.attr('role') === 'off')
        {
            button.attr('role', 'on');


            $.ajax({
                type: 'POST',
                url: config.apps.URL_API + form.attr('action'),
                headers: {
                    'Content-Type': 'application/json',
                    'key': getaccount().key
                },
                cache: false,
                timeout: 18000,
                data: formdatasend(form),
                dataType: 'JSON',
                success: function(n)
                {
                    // console.log(n);
                    button.attr('role', 'off');
                    

                    if( parseFloat( form.find('input[name="expire_days"]').val() ) === 0 )
                    {
                        card.find('.label-expire').parents('.fl-left').addClass('hide');
                    }
                    else
                    {
                        card.find('.label-expire').parents('.fl-left').removeClass('hide');
                    }

                    card.find('.label-name').html(form.find('input[name="name"]').val());
                    card.find('.label-nosurat').html(form.find('input[name="nosurat"]').val());
                    card.find('.label-expire').html(form.find('input[name="expire_days"]').val());

                    //
                    modal.find('button.close').click();
                    if( n.message !== '')
                    {
                        flagnotif('success', n.message);
                    }

                },
                error: function(n)
                {
                    // console.log(n);
                    flagnofig('error', 'Opss.. Terjadi kesalahan tidak diketahui. Refresh halaman kembali.');
                    button.attr('role', 'off');
                }
            });

        }



    }


    //submit modal contact 
    $('#modalcontact form').submit( function()
    {
        var form = $(this),
        modal = form.parents('.new-modal.show'),
        button = modal.find('button.modal-submit');


        form.validate(validateformcontact);
        form.valid();

        cekingsubmit = form.valid();

        if( cekingsubmit )
        {

            ceksubmitcontact(form);
        }

    });

    // valiadte form contact
    var validateformcontact = 
    {
        
        rules:{
            contact_phone:{
                required:!0,
                normalizer:r,
                number: true,
                minlength:9
            },
            contact_email:{
                customemail:!0,
                required:  {
                    depends:function(t){
                        return $(t).prop("required")
                    }
                }
            }
        },
        messages:{
            contact_phone:'Harus diisi sekurangnya 5 karakter',
            contact_email:'Harus diisi dengan alamat email valid',
        },
        errorPlacement:function(t,n)
        {
            $(n).parents('.ar-content').find('label.error').remove();
            $(n).parents('.ar-content').append(t);
            // console.log(n);
        }
        
    }


    // cek submit form contact
    function ceksubmitcontact(el)
    {
        var form = el,
        modal = form.parents('.new-modal.show'),
        button = modal.find('button.modal-submit'),
        card = $('body').find('.cmd-modal[data-target="#'+modal.attr('id')+'"]').parents('.card-body');


        if( button.attr('role') === 'off')
        {
            button.attr('role', 'on');


            $.ajax({
                type: 'POST',
                url: config.apps.URL_API + form.attr('action'),
                headers: {
                    'Content-Type': 'application/json',
                    'key': getaccount().key
                },
                cache: false,
                timeout: 18000,
                data: formdatasend(form),
                dataType: 'JSON',
                success: function(n)
                {
                    // console.log(n);
                    button.attr('role', 'off');
                    

                    if( $.trim( form.find('input[name="contact_email"]').val() ) === '' )
                    {
                        card.find('.label-contact_email').parent('.div').addClass('hide');
                    }
                    else
                    {
                        card.find('.label-contact_email').parent('.div').removeClass('hide');
                    }

                    //
                    card.find('.label-contact_phone').html(form.find('input[name="contact_phone"]').val());
                    card.find('.label-contact_email').html(form.find('input[name="contact_email"]').val());

                    //
                    modal.find('button.close').click();
                    if( n.message !== '')
                    {
                        flagnotif('success', n.message);
                    }
                },
                error: function(n)
                {
                    // console.log(n);
                    flagnofig('error', 'Opss.. Terjadi kesalahan tidak diketahui. Refresh halaman kembali.');
                    button.attr('role', 'off');
                }
            });

        }



    }


     //submit modal owner 
     $('#modalowner form').submit( function()
    {
        var form = $(this),
        modal = form.parents('.new-modal.show'),
        button = modal.find('button.modal-submit');


        form.validate(validateformowner);
        form.valid();

        cekingsubmit = form.valid();

        if( cekingsubmit )
        {

            ceksubmitowner(form);
        }

    });

    // valiadte form owner
    var validateformowner = 
    {
        
        rules:{
            owner_name:{
                required:!0,
                normalizer:r,
                minlength:3
            },
            owner_phone:{
                required:!0,
                normalizer:r,
                number: true,
                minlength:9
            },
            owner_email:{
                customemail:!0,
                required:  {
                    depends:function(t){
                        return $(t).prop("required")
                    }
                }
            }
        },
        messages:{
            owner_name:'Isikan sekurangnya 3 karakter',
            owner_phone:'Isikan dengan nomor telepon',
            owner_email:'Harus diisi dengan alamat email valid',
        },
        errorPlacement:function(t,n)
        {
            $(n).parents('.ar-content').find('label.error').remove();
            $(n).parents('.ar-content').append(t);
        }
        
    }


    // cek submit form owner
    function ceksubmitowner(el)
    {
        var form = el,
        modal = form.parents('.new-modal.show'),
        button = modal.find('button.modal-submit'),
        card = $('body').find('.cmd-modal[data-target="#'+modal.attr('id')+'"]').parents('.card-body');


        if( button.attr('role') === 'off')
        {
            button.attr('role', 'on');


            $.ajax({
                type: 'POST',
                url: config.apps.URL_API + form.attr('action'),
                headers: {
                    'Content-Type': 'application/json',
                    'key': getaccount().key
                },
                cache: false,
                timeout: 18000,
                data: formdatasend(form),
                dataType: 'JSON',
                success: function(n)
                {
                    // console.log(n);
                    button.attr('role', 'off');
                    


                    if( $.trim( form.find('input[name="owner_email"]').val() ) === '' )
                    {
                        card.find('.label-owner_email').parent('.div').addClass('hide');
                    }
                    else
                    {
                        card.find('.label-owner_email').parent('.div').removeClass('hide');
                    }
                    
                    card.find('.label-owner_name').html(form.find('input[name="owner_name"]').val());
                    card.find('.label-owner_phone').html(form.find('input[name="owner_phone"]').val());
                    card.find('.label-owner_email').html(form.find('input[name="owner_email"]').val());

                    //
                    modal.find('button.close').click();
                    if( n.message !== '')
                    {
                        flagnotif('success', n.message);
                    }

                },
                error: function(n)
                {
                    // console.log(n);
                    flagnofig('error', 'Opss.. Terjadi kesalahan tidak diketahui. Refresh halaman kembali.');
                    button.attr('role', 'off');
                }
            });

        }



    }


    //submit modal administator 
    $('#modaladmin-partner form').submit( function()
    {
        var form = $(this),
        modal = form.parents('.new-modal.show'),
        button = modal.find('button.modal-submit');


        form.validate(validateformadmin);
        form.valid();

        cekingsubmit = form.valid();

        if( cekingsubmit )
        {

            ceksubmitadmin(form);
        }

    });

    // valiadte form administator
    var validateformadmin = 
    {
        
        rules:{
            admin_name:{
                required:!0,
                minlength:3,
                normalizer:r
            },
            admin_email:{
                required:!0,
                customemail:!0
            },
            admin_phone:{
                required:!0,
                normalizer:r,
                number: true,
                minlength:9
            },
        },
        messages:{
            admin_name:'Harap isikan nama sekurangnya 3 karakter',
            admin_email:'Harap gunakan email valid',
            admin_phone: "Harap isikan nomor whatsapp dengan benar",
        },
        errorPlacement:function(t,n)
        {
            $(n).parents('.ar-content').find('label.error').remove();
            $(n).parents('.ar-content').append(t);
        }
        
    }


    // cek submit form administator
    function ceksubmitadmin(el)
    {
        var form = el,
        modal = form.parents('.new-modal.show'),
        button = modal.find('button.modal-submit'),
        card = $('body').find('.cmd-modal[data-target="#'+modal.attr('id')+'"]').parents('.card-body');


        if( button.attr('role') === 'off')
        {
            button.attr('role', 'on');


            $.ajax({
                type: 'POST',
                url: config.apps.URL_API + form.attr('action'),
                headers: {
                    'Content-Type': 'application/json',
                    'key': getaccount().key
                },
                cache: false,
                timeout: 18000,
                data: formdatasend(form),
                dataType: 'JSON',
                success: function(n)
                {
                    // console.log(n);
                    button.attr('role', 'off');
                    

                    
                    card.find('.label-admin_name').html(form.find('input[name="admin_name"]').val());
                    card.find('.label-admin_phone').html(form.find('input[name="admin_phone"]').val());
                    card.find('.label-admin_email').html(form.find('input[name="admin_email"]').val());

                    //
                    modal.find('button.close').click();
                    if( n.message !== '')
                    {
                        flagnotif('success', n.message);
                    }

                },
                error: function(n)
                {
 
                    if( n.status === 401)
                    {
                        
                        var focus = form.find('input[name="'+n.responseJSON.focus+'"]');
                        focus.parents('.ar-content').append('<label class="error">'+n.responseJSON.message+'</label>');
                        focus.addClass('error');
                        focus.focus();
                    }
                    else
                    {
                        flagnotif('error', n.responseJSON.message);
                    }

                    button.attr('role', 'off');
                }
            });

        }



    }

    //submit modal address 
    $('#modaladdress-partner form').submit( function()
    {
        var form = $(this),
        modal = form.parents('.new-modal.show'),
        button = modal.find('button.modal-submit');


        form.validate(validateformaddress);
        form.valid();

        cekingsubmit = form.valid();

        if( cekingsubmit )
        {

            ceksubmitaddress(form);
        }

    });

    // valiadte form address
    var validateformaddress = 
    {
        
        rules:{
            address:{
                required:!0,
                minlength:10,
                normalizer:r
            },
            address_kodepos:{
                required:!0,
                normalizer:r,
                number: true,
                minlength:5
            },
            address_array:{
                notnullhidden : '',
            },
            city:{
                required:!0,
                normalizer:r
            },
        },
        messages:{
            address:'Harap isikan alamat sekurangnya 10 karakter',
            address_kodepos:'Harap isi kodepos',
            address_array: "Pilih Kota atau Kecamatan",
            city: "Pilih Kota atau Kecamatan",
        },
        errorPlacement:function(t,n)
        {
            $(n).parents('.ar-content').find('label.error').remove();
            $(n).parents('.ar-content').append(t);
        }
        
    }


    
    // cek submit form distributor pice
    function ceksubmitaddress(el)
    {
        var form = el,
        modal = form.parents('.new-modal.show'),
        button = modal.find('button.modal-submit'),
        card = $('body').find('.cmd-modal[data-target="#'+modal.attr('id')+'"]').parents('.card-body');


        if( button.attr('role') === 'off')
        {
            button.attr('role', 'on');

            var addresslabel = form.find('input[name="city"]').val().split(',');


            $.ajax({
                type: 'POST',
                url: config.apps.URL_API + form.attr('action'),
                headers: {
                    'Content-Type': 'application/json',
                    'key': getaccount().key
                },
                cache: false,
                timeout: 18000,
                data: formdatasend(form),
                dataType: 'JSON',
                success: function(n)
                {
                    // console.log(n);
                    button.attr('role', 'off');
                    

                    
                    card.find('.label-address').html(form.find('textarea[name="address"]').val());
                    card.find('.label-address_kecamatan').html(addresslabel[2]);
                    card.find('.label-address_city').html(addresslabel[1]);
                    card.find('.label-address_provinsi').html(addresslabel[0]);
                    card.find('.label-address_kodepos').html(form.find('input[name="address_kodepos"]').val());
                    
                    //
                    modal.find('button.close').click();
                    if( n.message !== '')
                    {
                        flagnotif('success', n.message);
                    }

                },
                error: function(n)
                {
                    // console.log(n);
                    flagnofig('error', 'Opss.. Terjadi kesalahan tidak diketahui. Refresh halaman kembali.');
                    button.attr('role', 'off');
                }
            });

        }



    }


    //
    $('button.cddwn').click(function(e)
    {
        e.stopPropagation();
        e.preventDefault();

        dropdownNew($(this));
    });

    //
    $('body').on('click', '.area-ddwn ul li button', function(e)
    {

        e.stopPropagation();
        e.preventDefault();

        var cmd = $(this),
        form = cmd.parents('form');

        selectedDDWN(cmd);

        //
        form.find('.area-h-price span.label b span').html(cmd.attr('dataprice'));
        form.find('.area-h-price span.label').removeClass('hide');
        form.find('.area-h-price input').removeAttr('disabled');
        form.find('.area-h-price input').focus();

    });

    //
    $('.area-ddwn .ddwn-tsrc').keyup(function(e)
    {
        e.stopPropagation();

        srcDDWN($(this));
    });


    $('#modal-chpricedistributor input[name="distributor_price"]').keyup(function()
    {
        var price = $(this),
        modal = price.parents('#modal-chpricedistributor'),
        price2 = parseFloat(cnumber(modal.find('.vlabel-price').html()));

        numbFNoZero($(this));

        modal.find('label.error').remove();
        if( parseFloat(cnumber(price.val())) >= price2 )
        {
            
            price.addClass('error');
            price.parents('.ar-content').append('<label class="error">Harga yang di input harus lebih kecil</label>');
            modal.find('input[name="status_price"]').val('false');

            return;
        }

        
        modal.find('input[name="status_price"]').val('true');
        price.removeClass('error');
        price.parents('.ar-content').find('label.error').remove();


    });

    //submit modal distributor pice
    $('#modal-chpricedistributor form').submit( function()
    {
        var form = $(this),
        modal = form.parents('.new-modal.show'),
        button = modal.find('button.modal-submit');

        ceksubmitdistributorprice(form);
    });


    // cek submit form address
    function ceksubmitdistributorprice(el)
    {
        var form = el,
        modal = form.parents('.new-modal.show'),
        button = modal.find('button.modal-submit'),
        card = $('body').find('.cmd-modal[data-target="#'+modal.attr('id')+'"]').parents('.card-body');

        if( $.trim(form.find('input[name="distributor_product"]').val()) === '')
        {
            form.find('label.error').remove();
            form.find('input[name="distributor_product"]').parents('.ar-content').append('<label class="error">Harap pilih produk terlebih dulu</label>');
            form.find('input[name="distributor_product"]').parents('.ar-content').find('button.btn').addClass('br-error');
            form.find('input[name="distributor_product"]').parents('.ar-content').find('button.btn').focus();
            return;
        }

        if( $.trim(form.find('input[name="distributor_price"]').val()).length < 5 )
        {

            
            form.find('label.error').remove();
            form.find('input[name="distributor_price"]').addClass('error');
            form.find('input[name="distributor_price"]').parents('.ar-content').append('<label class="error">Harap tentukan harga distributor dengan benar</label>');
            form.find('input[name="distributor_price"]').focus();

            return;
        }

        if( form.find('input[name="status_price"]').val() === 'false' && $.trim(form.find('input[name="distributor_price"]').val()) !== '' )
        {

            form.find('label.error').remove();
            form.find('input[name="distributor_price"]').addClass('error');
            form.find('input[name="distributor_price"]').parents('.ar-content').append('<label class="error">Harga yang di input harus lebih kecil</label>');
            form.find('input[name="distributor_price"]').focus();
            return;
        }

        if( button.attr('role') === 'off')
        {
            button.attr('role', 'on');

            $.ajax({
                type: 'POST',
                url: config.apps.URL_API + form.attr('action'),
                headers: {
                    'Content-Type': 'application/json',
                    'key': getaccount().key
                },
                cache: false,
                timeout: 18000,
                data: formdatasend(form),
                dataType: 'JSON',
                success: function(n)
                {
                    // console.log(n);
                    button.attr('role', 'off');
                    if( n.message !== '')
                    {
                        flagnotif('success', n.message);
                    }

                    //
                    vListDistPrice(n.list,1);

                    if( form.find('input[name="type"]').val() === 'add')
                    {
                        modal.find('.area-ddwn button.btn').removeAttr('disabled');
                        modal.find('.area-ddwn button.btn span').html('Pilih Produk');
                        modal.find('.area-h-price span.label').addClass('hide');
                        modal.find('input[name="distributor_price"]').val('');
                        modal.find('input[name="distributor_price"]').attr('disabled','disabled');
                        modal.find('input[name="product_id"]').val('');
                        modal.find('input[name="distributor_product"]').val('');
                        modal.find('input[name="status_price"]').val('false');

                    }
                    else
                    {
                        modal.find('button.close').click();
                    }


                },
                error: function(n)
                {
                    // console.log(n);
                    if( n.status === 401)
                    {
                        form.find('label.error').remove();
                        form.find('button.btn').addClass('br-error');
                        form.find('button.btn').parents('.ar-content').append('<label class="error">'+n.responseJSON.message+'</label>');
                        button.attr('role', 'off'); 
                        return;
                    }
                    

                    flagnotif('error', 'Opss.. Terjadi kesalahan tidak diketahui. Refresh halaman kembali.');
                    button.attr('role', 'off'); 

                }
            });

        }



    }


    //
    $('#modaldelete form').submit( function()
    {
        var form = $(this),
        modal = form.parents('.new-modal.show'),
        button = modal.find('button.modal-submit');

    
        if( button.attr('role') === 'off')
        {
            button.attr('role', 'on');

            $.ajax({
                type: 'POST',
                url: config.apps.URL_API + form.attr('action'),
                headers: {
                    'Content-Type': 'application/json',
                    'key': getaccount().key
                },
                cache: false,
                timeout: 18000,
                data: formdatasend(form),
                dataType: 'JSON',
                success: function(n)
                {
                    // console.log(n);
                    modal.find('button.close').click();

                    
                    vListDistPrice(n.list,n.count);

                    if( n.message !== '')
                    {
                        flagnotif('success', n.message);
                    }


                    

                },
                error: function(n)
                {
                    // console.log(n.responseJSON);
                    if( n.status === 404)
                    {
                        modal.find('button.close').click();
                        flagnotif('error', n.responseJSON.message);

                        return;
                    }
                    
                    vListDistPrice(n.responseJSON.list,n.responseJSON.count);

                    flagnotif('error', 'Opss.. Terjadi kesalahan tidak diketahui. Refresh halaman kembali.');
                    button.attr('role', 'off'); 

                }
            });

        }

    });


    //
    function vListDistPrice(e,c)
    {
        console.log(e);
        var tab = $('#danger-v-pills-product');

        if( parseFloat(c) === 0)
        {
            tab.find('.box-tabing').attr('role', 'false')
        }
        else
        {
            tab.find('.box-tabing').attr('role', 'true');
            tab.find('.box-tabing ul').html( listPDist(e) );
        }
        

        // listPDist(n.list);

    }
    // form contact


    // src text in tabing

    $('body').on('keyup', '.txt-srcpdp', function(e)
    {
        var txt = $(this),
        text = txt.val().toLowerCase(),
        area = txt.parents('.in-box');

        if( $.trim(txt.val()).length >= 1 )
        {
            area.find('ul li').addClass('hide');
            area.find('ul li').filter(function()
            {
                return $(this).find('.label-name').text().toLowerCase().indexOf(text) !== -1;

            }).removeClass('hide');
        }
        else
        {
            area.find('ul li').removeClass('hide');
        }
    })


    // SELECT PRODUCT LIST
    $("body").on("click", ".cmd-select-pddist", function(e)
    {
        e.preventDefault();

        var cmd = $(this),
        form = cmd.parents('form'),
        area = cmd.parents('.modal-content');

        if( cmd.attr('role') === 'off')
        {
            cmd.attr('role', 'on');
        }
        else
        {
            cmd.attr('role', 'off')
        }

        var list = [];
        var list2 = [];
        area.find(".ar-selcheck-product li a[role='on']").each(function(){
            list.push($(this).attr("dataid"));
        });
        area.find(".ar-selcheck-product li a[role='off'][datasave='on']").each(function(){
            list2.push($(this).attr("dataid"));
        });



        var val = list.length === 0 ? '' : list; //JSON.stringify(list);
        var val2 = list2.length === 0 ? '' : list2;

        area.find('.value-item').html(list.length);
        form.find('input[name="product_selected"]').val(val);
        form.find('input[name="product_deleted"]').val(val2);

        if( form.find('input[name="product_selected"]').val() !== ""  )
        {
            if( form.find('input[name="product_selected"]').val() !== form.find('input[name="product_id"]').val() )
            {
                area.find('button.modal-submit').removeAttr('disabled');
            }
            else
            {
                area.find('button.modal-submit').attr('disabled','disabled');
            }
        }
        else
        {
            area.find('button.modal-submit').attr('disabled','disabled');
        }
    });


    $('body').on('click', '.cmd-modal[data-target="#modal-tproduct-dist"]', function()
    {
        var cmd = $(this),
        type = cmd.attr('data-type'),
        tr = cmd.parents('.tr'),
        modal = $(cmd.attr('data-target')),
        card = cmd.parents('.card-body');

        modal.find('input[name="type"]').val(type);
        modal.find('.load-area').addClass('show');

        if( type === 'add')
        {
            modal.find('.modal-title span').html('Pilih Produk Distributor');
            modal.find('input[name="product_id"]').val( '' );
            modal.find('input[name="product_selected"]').val( '' );
            modal.find('.value-item').html('0');

        }
        else
        {
            modal.find('.modal-title span').html('Sunting Produk Distributor');
            var pid = $('body').find('#danger-v-pills-tproduct input[name="tab-product-list"]').val();
            var npid = pid.split(',');
            modal.find('input[name="product_id"]').val( pid );
            modal.find('input[name="product_selected"]').val( pid );
            modal.find('.value-item').html(npid.length);
            
        }

        listproductfordistributor(modal);
        
    });


    function listproductfordistributor(e)
    {

        var modal = e,
        type = modal.find('input[name="type"]').val(),
        pid = modal.find('input[name="product_id"]').val();

        var $URL = config.apps.URL_API + '/api/product/distributor-list?id=' + getaccount()['config']['company_id'];

        var $t = FormSending("","GET","key","",$URL);
        $t.success(function(n)
        {
            var li = '';
            var lstx = pid.split(',');

            $.each(n, function(i, item)
            {
                li += '<li><a href="#" class="fsize12 cmd-select-pddist" dataid="'+( item.id )+'" role="'+( lstx[item.id] === true ? 'on' : 'off' )+'" datasave="off"><div class="in-select"><div class="divH clr-float">';

                    li += '<div class="fl-left"><div class="divH achk"><div class="tbl"><div class="intbl"><div class="cbhk br-rds2"><i class="icn fa color-green flaticon2-check-mark"></i></div></div></div> </div></div>';

                    li += '<div class="fl-left"><div class="divH ar-img-pd"><div class="arimage-resize"><img src="'+ (item.images) +'" alt="image"></div></div></div>';

                    li += '<div class="fl-left"><div class="divH"><div class="tbl"><div class="intbl label-name">'+( item.name )+'</div></div></div></div>';

                    li += '<div class="fl-right label fsize11"><div class="divH"><div class="tbl"><div class="intbl">'+ ( formatRupiah( parseFloat(item.price), '' ) ) +'</div></div></div></div>';

                li += '</div></div></a></li>';
            });

            modal.find('ul.ar-selcheck-product').html(li);

            $.each(lstx, function(x,y)
            {
                modal.find('ul.ar-selcheck-product li a[dataid="'+y+'"]').attr('role', 'on');
                modal.find('ul.ar-selcheck-product li a[dataid="'+y+'"]').attr('datasave', 'on');
            });
            modal.find('.load-area').removeClass('show');

        });
        $t.error(function(n)
        {
            console.log(n);
        });
    }

    $('#modal-tproduct-dist form').submit(function()
    {
        var form = $(this),
        modal = form.parents('.modal-dialog'),
        cmd = modal.find('button.modal-submit');

        if( cmd.attr('role') === 'off' )
        {
            cmd.attr('role', 'on');

            var $URL = config.apps.URL_API + form.attr('action');
            //
            var $t = FormSending(form,"POST","key","from",$URL);
            $t.success(function(n)
            {
                console.log(n);
                listProductToDist(n.list);
                modal.find('button.close').click();
                flagnotif('success', 'Data berhasil disimpan');
                // cmd.attr('role', 'off');
            });
            $t.error(function(n)
            {
                console.log(n.responseJSON.message);
                modal.find('button.close').click();
                flagnotif('error', 'Terjadi kesalahan tidak diketahui');
                // cmd.attr('role', 'off');
            });
            
        }

        return false;
    });


    function listProductToDist(e)
    {

        var tab = $('#danger-v-pills-tproduct');
        var li = '';

        $.each(e, function(i, item)
        {
            li += '<li class="'+ ( i % 2 === 0 ? 'sling' : '') +'" dataid="'+item.id+'" datapd="'+item.product_id+'">';
                li += '<div class="div clr-float">';
                    li += '<div class="fl-left">';
                        li += '<div class="div"><div class="div"><b class="label-name">'+item.name+'</b></div></div>';
                    li += '</div>';
                    li += '<div class="fl-right label fsize12">'+( formatRupiah( parseFloat(item.price) ) )+'</div>';

                li += '</div>';
            li +='</li>';
        });

        tab.find('.box-tabing ul').html( li );
        
        var list = [];
        tab.find(".box-tabing ul li").each(function(){
            list.push($(this).attr("datapd"));
        });

        var val = list.length === 0 ? '' : list;
        tab.find('input[name="tab-product-list"]').val(val);
        list.length > 0 ? tab.find('.box-tabing').attr('role', 'true') : tab.find('.box-tabing').attr('role', 'false');
    }

    return false;
});
</script>
@endsection

